<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="Description" content="Enter your description here"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB130NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">
<link rel="stylesheet" href="css/style.css">
<title>HB-13</title>
</head>
<body>
    <header>
        <% if ( tipoUsuario === "admin") { %>
            <%- include('Navbar'); %>
        <% } else if ( tipoUsuario === "mesero") { %>
            <%- include('NavarMesero'); %>
        <% } %>
    </header>
<div class="espacios">
    <% if ( tipoUsuario === "admin") { %>
        <div class="alineacion">
            <button class="clientes btnCliente"  title="Ingresar Cliente"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 7.5C12 9.433 10.433 11 8.5 11C6.567 11 5 9.433 5 7.5C5 5.567 6.567 4 8.5 4C10.433 4 12 5.567 12 7.5Z" stroke="#000000" stroke-width="1.5"/>
                <path d="M13.5 11C15.433 11 17 9.433 17 7.5C17 5.567 15.433 4 13.5 4" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M13.1429 20H3.85714C2.83147 20 2 19.2325 2 18.2857C2 15.9188 4.07868 14 6.64286 14H10.3571C11.4023 14 12.3669 14.3188 13.1429 14.8568" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M19 14V20M22 17L16 17" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
            </button>
            <button class="Pagos" data-toggle="tooltip" data-placement="top" title="Imprimir Pre-Cuenta"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12.002 9.00708C10.8974 9.00708 10.002 9.67865 10.002 10.5071C10.002 11.3355 10.8974 12.0071 12.002 12.0071C13.1065 12.0071 14.002 12.6787 14.002 13.5071C14.002 14.3355 13.1065 15.0071 12.002 15.0071M12.002 9.00708C12.8728 9.00708 13.6136 9.42448 13.8881 10.0071M12.002 9.00708V8.00708M12.002 15.0071C11.1311 15.0071 10.3903 14.5897 10.1158 14.0071M12.002 15.0071V16.0071" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M13 2.50708C13 2.50708 12.6839 2.50708 12 2.50708C7.52166 2.50708 5.28249 2.50708 3.89124 3.89833C2.5 5.28957 2.5 7.52874 2.5 12.0071C2.5 16.4854 2.5 18.7246 3.89124 20.1159C5.28249 21.5071 7.52166 21.5071 12 21.5071C16.4783 21.5071 18.7175 21.5071 20.1088 20.1159C21.5 18.7246 21.5 16.4854 21.5 12.0071C21.5 11.3232 21.5 11.0071 21.5 11.0071" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M21.4883 2.49292L17.3125 6.67112M16.4883 3.01468L16.6065 6.10617C16.6065 6.83481 17.0416 7.2888 17.8341 7.34606L20.9581 7.49292" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <a href="/PagarHB13">
            <button class="Pagos" id="factura" data-toggle="tooltip" data-placement="top" title="Pagar cuenta"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M13.4659 4.02246C15.9701 4.02246 18 6.03463 18 8.51676C18 10.9989 15.9701 13.0111 13.4659 13.0111C11.2439 13.0111 9.39528 11.4269 9.00684 9.33581" stroke="#000000" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M21.9977 14.0098H19.6047C19.3107 14.0098 19.0208 14.076 18.7579 14.2031L16.7176 15.1899C16.4547 15.317 16.1648 15.3831 15.8708 15.3831H14.829C13.8214 15.3831 13.0045 16.1732 13.0045 17.1478C13.0045 17.1871 13.0315 17.2218 13.0706 17.2326L15.6096 17.9343C16.0651 18.0601 16.5528 18.0163 16.9765 17.8113L19.1577 16.7566M13.0045 16.5066L8.41518 15.0973C7.6016 14.8439 6.72215 15.1443 6.21251 15.8497C5.84403 16.3597 5.99406 17.0901 6.53091 17.3997L14.0408 21.7305C14.5184 22.0059 15.082 22.0731 15.6073 21.9173L21.9977 20.022" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M2.00195 4.51946C3.52934 3.92192 5.70251 2.46381 6.89042 2.16488C9.52307 1.63627 10.9042 2.41475 14.0218 4.02328C12.7097 4.05108 10.9458 4.8019 10.0777 6.51749M10.0777 6.51749H8.29356M10.0777 6.51749H11.3866C11.7803 6.54609 12.6286 6.78318 12.9555 7.54414C13.0867 7.84952 13.1241 8.21246 12.8665 8.39582C12.5192 8.7541 12.0207 8.74007 11.5785 8.81844M11.5785 8.81844C11.071 8.90838 10.5821 9.00828 10.071 9.1077M11.5785 8.81844L10.071 9.1077M10.071 9.1077C9.95817 9.12964 9.84428 9.15156 9.72886 9.17335M10.071 9.1077L9.72886 9.17335M9.72886 9.17335C8.93219 9.26231 6.99002 10.1914 6.04417 10.4516C5.72222 10.6054 3.14121 11.1057 2.01609 11.0179" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg></button>
            </a>
        </div>
        <%} %>

<div class="row ">
    <div class="col-6">
        <h2>Productos</h2>
        <div class="container" >
            <table id="productos" class="table table-dark table-responsive " style="width: 100%;">
                    <thead>
                    <tr>
                        <th scope="col">Producto</th>
                        <th scope="col">Precio</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Opciones</th>
                    </tr>
                </thead>
                <tbody>
                    <% let totalPrecio = 0; %>
                    <% productos.forEach( (productos) => { %>
                        <tr>
                            <td> <%= productos.Producto %></td>
                            <td> <%= productos.Precio %></td>
                            <td> <%= productos.Tipo %></td>
                            <td> 
                                <a href="/AgregarHB13/<%= productos.id %>" type="button" class="btnAgregarProducto btn btn-outline-primary bi bi-cart-plus"> </a>
                            </td>
                        </tr>
                   <% }) %>
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-6">
        <h2>Cuenta</h2>
        <div class="container contenedor-tabla" >
            <table id="Cuenta" class="table table-dark "  >
                    <thead>
                    <tr>
                        <th scope="col">Producto</th>
                        <th scope="col">Precio</th>
                        <th scope="col">Tipo</th>
                        <th scope="col">Usuario</th>
                        <th scope="col">Hora</th>
                        <% if ( tipoUsuario === "admin") { %>
                            <th scope="col">Opciones</th>
                        <%} %>
                    </tr>
                </thead>
                <tbody>
                    <% HB.forEach( (HB) => { %>
                        <tr>
                            <td> <%= HB.Producto %></td>
                            <td> <%= HB.Precio %></td>
                            <td> <%= HB.Tipo %></td>
                            <td> <%= HB.Usuario%></td>
                            <td> <%= HB.Hora %></td>
                            <% if ( tipoUsuario === "admin") { %>
                            <td> 
                                    <a href="/eliminarHB13/<%= HB.id %>" type="button" class="btnAgregarProducto btn btn-outline-danger  bi bi-cart-x"> </a>
                            </td>
                            <%} %>
                            <% totalPrecio += HB.Precio; %> <!-- Suma el precio del producto al total -->
                        </tr>
                   <% }) %>
                   <tr>
                    <% if ( tipoUsuario === "admin") { %>
                        <td colspan="5" style="text-align: right;"><strong>Total:</strong></td>
                        <td><%= totalPrecio %></td>
                        <%} %>
                        <% if ( tipoUsuario === "mesero") { %>
                            <td colspan="4" style="text-align: right;"><strong>Total:</strong></td>
                            <td><%= totalPrecio %></td>
                            <%} %>
                    
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
   <!-- ventana modal -->
   <div id="modalIngreso" class="modal fade" tabindex="-1" aria-labelledby="modalIngreso" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="exampleModalLabel">Ingresar Cliente</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/IngresarCliente13" method="POST">
                    <div class="mb-3">
                        <input type="text" name="Habitacion" value="HB-13" class="form-control" readonly>
                    </div>
                    <div class="mb-3">
                        <input id="Nombre" name="Nombre" type="text" class="form-control" placeholder="Nombres" required>
                    </div>
                    <div class="mb-3">
                      <input id="Apellido" name="Apellido" type="text" class="form-control" placeholder="Apellidos" required>
                    </div>
                  <div class="mb-3">
                    <select name="tipo" id="type" class="form-select" required >
                        <option value="Null">---Tipo documento---</option>
                        <option value="CC">CC</option>
                        <option value="TI">TI</option>
                        <option value="PS">Pasaporte</option>
                        <option value="RC">Registro</option>
                        <option value="Otro">Otro</option>
                      </select>
                    <input id="Documento" name="Documento" type="text" class="form-control" placeholder="Documento" required>
                </div>
                <div class="mb-3">
                    <input id="Celular" name="Celular" type="text" class="form-control" placeholder="Celular" required>
                  </div>
                  <div class="mb-3">
                    <input id="Correo" name="Correo" type="text" class="form-control" placeholder="Correo" required>
                  </div>
                    <div class="mb-3">
                        <input id="Abono" name="Abono" type="text" class="form-control" placeholder="Abono" required>
                      </div>
                      <div class="mb-3">
                        <input id="Pago" name="Pago" type="text" class="form-control" placeholder="Pago final">
                      </div>
                      <div class="mb-3">
                        <label for="Fecha" class="col-form-label letra">Fecha Ingreso:</label>
                        <input id="Fecha" name="Fecha" type="date" class="form-control" value="">
                      </div>
                      <div class="mb-3">
                        <label for="Salida" class="col-form-label letra">Fecha Salida:</label>
                        <input id="Salida" name="Salida" type="date" class="form-control" value="">
                      </div>
                    <div class="modal-footer">
                      <button type="submit" class="btn btn-primary">Ingresar</button>
                      </div>
                    </div>
                </form>
            </div>
        </div>
</div>
<script src="js/ModalCliente.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.flash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script>
$(document).ready(function() {
    $('#productos').DataTable({
        "language": {
            "decimal":        "",
            "emptyTable":     "No hay datos disponibles en la tabla",
            "info":           "Mostrando _START_ a _END_ de _TOTAL_ entradas",
            "infoEmpty":      "Mostrando 0 a 0 de 0 entradas",
            "infoFiltered":   "(filtrado de un total de _MAX_ entradas)",
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     "Mostrar _MENU_ entradas",
            "loadingRecords": "Cargando...",
            "processing":     "Procesando...",
            "search":         "Buscar:",
            "zeroRecords":    "No se encontraron registros coincidentes",
            "paginate": {
                "first":      "Primero",
                "last":       "Último",
                "next":       "Siguiente",
                "previous":   "Anterior"
            },
            "aria": {
                "sortAscending":  ": Activar para ordenar la columna en orden ascendente",
                "sortDescending": ": Activar para ordenar la columna en orden descendente"
            }
        }
    });
});
    </script>
</body>
</html>